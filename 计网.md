# 计算机网络

## TCP/IP

5层结构：物理层、数据链路层、网络层、传输层、应用层
7层结构：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层
网络层：IP协议，主机到主机逻辑通信、不可靠
传输层：TCP（可靠）、UDP（不可靠），进程到进程间逻辑通信

TCP：全双工、一对一、可靠、面向数据流、自动充传、流量控制、拥塞控制、三次握手、四次挥手
UDP：一对多、一对一、不可靠、面向数据包、不分片、dns服务使用UDP协议
TCP并不比UDP“高级”，两者的应用场景不同，在对实时性的需求高于可靠性时，UDP是不错的选择。网络中的丢包和拥塞并不是经常发生，如果在可容忍的范围内，完全可使用速度更快的UDP，如
QQ视频、音频通话

TCP沾包：
TCP在发送数据流时，为了更加高效的发送，将一些间隔较小、数据量较小的数据，合并成一个
数据量较大的数据包，发送给接收端，而接收端接收时需要对包进行拆解。
就是连续窗口协议：对于窗口中已收到确认的序列号，直接将窗口移至该序列号下一个，
解决方法：
1. 在数据包中加入界限符，通过界限符判断包的开始和结束
2. 在数据包的固定位置写入该数据包的长度，则接收端在判断时，会等待一个完整的数据包
后再传递给应用层。


## ARP协议

ARP协议工作在网络层，用于通过IP地址寻找每台主机唯一的MAC地址，在路由器转发数据包时，并不是直接使用IP地址而是使用MAC地址与端口对应，包装成MAC包通过数据链路层进行路由转发。
每台主机中都有ARP缓存，最开始加入新的局域网时，ARP缓存中的内容为空，因此在该网段内
发出一个ARP广播报文“我是A，我在找B”，同网段的非B主机收到该报文后抛弃，而B将A的MAC地址
与IP地址的映射写入ARP缓存，并向A单独发送回答报文，此时A和B都将对方的IP地址和MAC地址的
映射写入了各自的ARP缓存以便以后使用。
ARP攻击：其他非B主机若收到广播报文后不抛弃，而是装成B向A多次发送自己MAC地址的映射，则
A很有可能会错误的认为B主机是该攻击主机。